#!/usr/bin/env bash
set -euo pipefail

echo "Running pre-commit hooks..."

# Collect staged Rust files
files=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.rs$' || true)
[ -z "$files" ] && exit 0

# Check each staged file with rustfmt --check
echo "$files" | xargs -r rustfmt --edition 2021 --check